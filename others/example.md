::: wp-site-blocks
::: wp-block-template-part
::: {.wp-block-group .has-global-padding .is-layout-constrained .wp-block-group-is-layout-constrained}
::: {.wp-block-group .alignfull .is-vertical .is-content-justification-center .is-layout-flex .wp-container-core-group-layout-1 .wp-block-group-is-layout-flex style="padding-bottom:var(--wp--preset--spacing--40)"}
<figure class="wp-block-image aligncenter size-large is-style-rounded">
<a href="https://madsblog.net/"><img
src="https://madsblog.net/wp-content/uploads/2023/11/1-3-1024x276.png"
class="wp-image-1079" decoding="async" data-fetchpriority="high"
sizes="(max-width: 1024px) 100vw, 1024px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/1-3-1024x276.png 1024w, https://madsblog.net/wp-content/uploads/2023/11/1-3-300x81.png 300w, https://madsblog.net/wp-content/uploads/2023/11/1-3-768x207.png 768w, https://madsblog.net/wp-content/uploads/2023/11/1-3-1536x414.png 1536w, https://madsblog.net/wp-content/uploads/2023/11/1-3.png 1640w"
width="1024" height="276" /></a>
</figure>

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgaGVpZ2h0PSIyNCIgdmlld2JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICAgICAgIDxyZWN0IGhlaWdodD0iMS41IiB3aWR0aD0iMTYiIHg9IjQiIHk9IjcuNSI+CiAgICAgICAgIDwvcmVjdD4KICAgICAgICAgPHJlY3QgaGVpZ2h0PSIxLjUiIHdpZHRoPSIxNiIgeD0iNCIgeT0iMTUiPgogICAgICAgICA8L3JlY3Q+CiAgICAgICAgPC9zdmc+)

::: {#modal-1 .wp-block-navigation__responsive-container wp-class--has-modal-open="selectors.core.navigation.isMenuOpen" wp-class--is-menu-open="selectors.core.navigation.isMenuOpen" wp-effect="effects.core.navigation.initMenu" wp-on--focusout="actions.core.navigation.handleMenuFocusout" wp-on--keydown="actions.core.navigation.handleMenuKeydown" style="" tabindex="-1"}
::: {.wp-block-navigation__responsive-close tabindex="-1"}
::: {.wp-block-navigation__responsive-dialog wp-bind--aria-label="selectors.core.navigation.ariaLabel" wp-bind--aria-modal="selectors.core.navigation.ariaModal" wp-bind--role="selectors.core.navigation.roleAttribute" wp-effect="effects.core.navigation.focusFirstElement"}
![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgaGVpZ2h0PSIyNCIgdmlld2JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMyAxMS44bDYuMS02LjMtMS0xLTYuMSA2LjItNi4xLTYuMi0xIDEgNi4xIDYuMy02LjUgNi43IDEgMSA2LjUtNi42IDYuNSA2LjYgMS0xeiI+CiAgICAgICAgICAgIDwvcGF0aD4KICAgICAgICAgICA8L3N2Zz4=)

::: {#modal-1-content .wp-block-navigation__responsive-container-content}
-   [**Azure**](https://madsblog.net/category/azure/){.wp-block-navigation-item__content}
    ![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZmlsbD0ibm9uZSIgZm9jdXNhYmxlPSJmYWxzZSIgaGVpZ2h0PSIxMiIgdmlld2JveD0iMCAwIDEyIDEyIiB3aWR0aD0iMTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjUwMDAyIDRMNi4wMDAwMiA4TDEwLjUgNCIgc3Ryb2tlLXdpZHRoPSIxLjUiPgogICAgICAgICAgICAgICA8L3BhdGg+CiAgICAgICAgICAgICAgPC9zdmc+)
    -   [[ AKS
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/devops-tools/aks/){.wp-block-navigation-item__content}
    -   [[ Application Gateway
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/azure/app-gateway/){.wp-block-navigation-item__content}
    -   [[ Azure AD Connect
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/azure/azure-ad-connect-azure/){.wp-block-navigation-item__content}
    -   [[ Multi Factor Authentication (MFA)
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/azure/multi-factor-authentication-mfa/){.wp-block-navigation-item__content}
    -   [[ Data Lake Gen2
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/azure/adls-gen2/){.wp-block-navigation-item__content}
    -   [[ Automation
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/azure/automation/){.wp-block-navigation-item__content}
-   [**GCP**](https://madsblog.net/category/google-cloud-platform/){.wp-block-navigation-item__content}
    ![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZmlsbD0ibm9uZSIgZm9jdXNhYmxlPSJmYWxzZSIgaGVpZ2h0PSIxMiIgdmlld2JveD0iMCAwIDEyIDEyIiB3aWR0aD0iMTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjUwMDAyIDRMNi4wMDAwMiA4TDEwLjUgNCIgc3Ryb2tlLXdpZHRoPSIxLjUiPgogICAgICAgICAgICAgICA8L3BhdGg+CiAgICAgICAgICAgICAgPC9zdmc+)
    -   [[ gcloud
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/google-cloud-platform/gcloud){.wp-block-navigation-item__content}
    -   [[ Cloud Run
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/google-cloud-platform/cloud-run){.wp-block-navigation-item__content}
    -   [[ Cloud Build
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/google-cloud-platform/cloud-build){.wp-block-navigation-item__content}
    -   [[ HTTP Load Balancer
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/google-cloud-platform/http-load-balancer){.wp-block-navigation-item__content}
    -   [[ GKE
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/google-cloud-platform/gke/){.wp-block-navigation-item__content}
-   [**DevOps
    Tools**](https://madsblog.net/category/devops-tools/){.wp-block-navigation-item__content}
    ![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZmlsbD0ibm9uZSIgZm9jdXNhYmxlPSJmYWxzZSIgaGVpZ2h0PSIxMiIgdmlld2JveD0iMCAwIDEyIDEyIiB3aWR0aD0iMTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjUwMDAyIDRMNi4wMDAwMiA4TDEwLjUgNCIgc3Ryb2tlLXdpZHRoPSIxLjUiPgogICAgICAgICAgICAgICA8L3BhdGg+CiAgICAgICAgICAgICAgPC9zdmc+)
    -   [[ GitHub
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/devops-tools/github/){.wp-block-navigation-item__content}
    -   [[ Terraform
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/devops-tools/terraform/){.wp-block-navigation-item__content}
    -   [[ Kubernetes
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/devops-tools/kubernetes/){.wp-block-navigation-item__content}
    -   [[ ArgoCD
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/devops-tools/argocd/){.wp-block-navigation-item__content}
-   [**Automation**](https://madsblog.net/category/automation/){.wp-block-navigation-item__content}
    ![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZmlsbD0ibm9uZSIgZm9jdXNhYmxlPSJmYWxzZSIgaGVpZ2h0PSIxMiIgdmlld2JveD0iMCAwIDEyIDEyIiB3aWR0aD0iMTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjUwMDAyIDRMNi4wMDAwMiA4TDEwLjUgNCIgc3Ryb2tlLXdpZHRoPSIxLjUiPgogICAgICAgICAgICAgICA8L3BhdGg+CiAgICAgICAgICAgICAgPC9zdmc+)
    -   [[ Bash
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/google-cloud-platform/bash){.wp-block-navigation-item__content}
-   [**Windows/linux**](https://madsblog.net/category/articulos/){.wp-block-navigation-item__content}
    ![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZmlsbD0ibm9uZSIgZm9jdXNhYmxlPSJmYWxzZSIgaGVpZ2h0PSIxMiIgdmlld2JveD0iMCAwIDEyIDEyIiB3aWR0aD0iMTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjUwMDAyIDRMNi4wMDAwMiA4TDEwLjUgNCIgc3Ryb2tlLXdpZHRoPSIxLjUiPgogICAgICAgICAgICAgICA8L3BhdGg+CiAgICAgICAgICAgICAgPC9zdmc+)
    -   [[ Ubuntu
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/articulos/ubuntu){.wp-block-navigation-item__content}
    -   [[ Active Directory
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/articulos/active-directory/){.wp-block-navigation-item__content}
    -   [[ File and Storage Services ]{.wp-block-navigation-item__label}
        [ Artículos -- File and Storage Services
        ]{.wp-block-navigation-item__description}](https://madsblog.net/category/articulos/file-and-storage-services/){.wp-block-navigation-item__content}
    -   [[ Hyper-v
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/articulos/hyper-v/){.wp-block-navigation-item__content}
    -   [[ ServerCore
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/articulos/servercore/){.wp-block-navigation-item__content}
    -   [[ Server Manager
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/articulos/server-manager/){.wp-block-navigation-item__content}
-   [**Microsoft
    365**](https://madsblog.net/category/microsoft-365/){.wp-block-navigation-item__content}
    ![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZmlsbD0ibm9uZSIgZm9jdXNhYmxlPSJmYWxzZSIgaGVpZ2h0PSIxMiIgdmlld2JveD0iMCAwIDEyIDEyIiB3aWR0aD0iMTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjUwMDAyIDRMNi4wMDAwMiA4TDEwLjUgNCIgc3Ryb2tlLXdpZHRoPSIxLjUiPgogICAgICAgICAgICAgICA8L3BhdGg+CiAgICAgICAgICAgICAgPC9zdmc+)
    -   [[ Azure AD Connect
        ]{.wp-block-navigation-item__label}](https://madsblog.net/category/microsoft-365/azure-ad-connect-365/){.wp-block-navigation-item__content}
    -   [Exchange
        Server](https://madsblog.net/category/exchange-server/){.wp-block-navigation-item__content}
        ![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZmlsbD0ibm9uZSIgZm9jdXNhYmxlPSJmYWxzZSIgaGVpZ2h0PSIxMiIgdmlld2JveD0iMCAwIDEyIDEyIiB3aWR0aD0iMTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEuNTAwMDIgNEw2LjAwMDAyIDhMMTAuNSA0IiBzdHJva2Utd2lkdGg9IjEuNSI+CiAgICAgICAgICAgICAgICAgPC9wYXRoPgogICAgICAgICAgICAgICAgPC9zdmc+)
        -   [[ Exchange Online
            ]{.wp-block-navigation-item__label}](https://madsblog.net/category/exchange-server/exchange-online/){.wp-block-navigation-item__content}
        -   [[ Exchange Server
            ]{.wp-block-navigation-item__label}](https://madsblog.net/category/exchange-server/ex-2010/){.wp-block-navigation-item__content}
-   [[ **Noticias**
    ]{.wp-block-navigation-item__label}](https://madsblog.net/category/noticias/){.wp-block-navigation-item__content}
-   [[ **Sobre mi**
    ]{.wp-block-navigation-item__label}](https://madsblog.net/480-2/){.wp-block-navigation-item__content}
:::
:::
:::
:::
:::
:::
:::

::: {.wp-block-group .is-layout-flow .wp-block-group-is-layout-flow role="main" style="margin-top:var(--wp--preset--spacing--50)"}
::: {.wp-block-group .has-global-padding .is-layout-constrained .wp-block-group-is-layout-constrained}
# Storage Persistente en GKE {#storage-persistente-en-gke .has-text-align-center .alignwide .wp-block-post-title style="margin-bottom:var(--wp--preset--spacing--40);"}
:::

::: {.wp-block-group .has-global-padding .is-layout-constrained .wp-block-group-is-layout-constrained}
::: {.entry-content .alignwide .wp-block-post-content .has-global-padding .is-layout-constrained .wp-block-post-content-is-layout-constrained}
<figure class="wp-block-image size-full">
<img src="https://madsblog.net/wp-content/uploads/2023/11/image-65.png"
class="wp-image-1127" decoding="async"
sizes="(max-width: 679px) 100vw, 679px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-65.png 679w, https://madsblog.net/wp-content/uploads/2023/11/image-65-300x151.png 300w"
width="679" height="341" />
</figure>

Kubernetes se ha establecido como la herramienta predilecta para
desplegar, escalar y gestionar aplicaciones en la nube. Una de las
principales razones es su robustez y flexibilidad es su sistema de
manejo de volúmenes, diseñado para abordar uno de los desafíos más
grandes en la contenerización: la persistencia de datos.

En este caso estaremos realizando una introducción sobre Volumenes
efimeros y persistentes en GKE.

::: {#ez-toc-container .ez-toc-v2_0_58 .ez-toc-wrap-left .counter-hierarchy .ez-toc-counter .ez-toc-black .ez-toc-container-direction}
::: ez-toc-title-container
Table of Contents

[ Toggle ]{.eztoc-hide style="display:none;"} [
![](data:image/svg+xml;base64,PHN2ZyBjbGFzcz0ibGlzdC0zNzc0MDgiIGZpbGw9Im5vbmUiIGhlaWdodD0iMjBweCIgc3R5bGU9ImZpbGw6ICM5OTk7Y29sb3I6Izk5OSIgdmlld2JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjBweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgICAgICA8cGF0aCBkPSJNNiA2SDR2MmgyVjZ6bTE0IDBIOHYyaDEyVjZ6TTQgMTFoMnYySDR2LTJ6bTE2IDBIOHYyaDEydi0yek00IDE2aDJ2Mkg0di0yem0xNiAwSDh2MmgxMnYtMnoiIGZpbGw9ImN1cnJlbnRDb2xvciI+CiAgICAgICAgICAgICAgPC9wYXRoPgogICAgICAgICAgICAgPC9zdmc+){.list-377408}
![](data:image/svg+xml;base64,PHN2ZyBiYXNlcHJvZmlsZT0idGlueSIgY2xhc3M9ImFycm93LXVuc29ydGVkLTM2ODAxMyIgaGVpZ2h0PSIxMHB4IiBzdHlsZT0iZmlsbDogIzk5OTtjb2xvcjojOTk5IiB2ZXJzaW9uPSIxLjIiIHZpZXdib3g9IjAgMCAyNCAyNCIgd2lkdGg9IjEwcHgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICAgICAgICAgICAgPHBhdGggZD0iTTE4LjIgOS4zbC02LjItNi4zLTYuMiA2LjNjLS4yLjItLjMuNC0uMy43cy4xLjUuMy43Yy4yLjIuNC4zLjcuM2gxMWMuMyAwIC41LS4xLjctLjMuMi0uMi4zLS41LjMtLjdzLS4xLS41LS4zLS43ek01LjggMTQuN2w2LjIgNi4zIDYuMi02LjNjLjItLjIuMy0uNS4zLS43cy0uMS0uNS0uMy0uN2MtLjItLjItLjQtLjMtLjctLjNoLTExYy0uMyAwLS41LjEtLjcuMy0uMi4yLS4zLjUtLjMuN3MuMS41LjMuN3oiPgogICAgICAgICAgICAgIDwvcGF0aD4KICAgICAgICAgICAgIDwvc3ZnPg==){.arrow-unsorted-368013}
]{.ez-toc-icon-toggle-span}
:::

-   [Tipos de
    Volumenes](#Tipos_de_Volumenes "Tipos de Volumenes"){.ez-toc-link
    .ez-toc-heading-1}
    -   [Volumenes
        efímeros:](#Volumenes_efimeros "Volumenes efímeros:"){.ez-toc-link
        .ez-toc-heading-2}
    -   [Volumenes
        Persistentes:](#Volumenes_Persistentes "Volumenes Persistentes:"){.ez-toc-link
        .ez-toc-heading-3}
-   [¿Que es un
    StatefulSet?](#%C2%BFQue_es_un_StatefulSet "¿Que es un StatefulSet?"){.ez-toc-link
    .ez-toc-heading-4}
-   [Laboratorio: probando PersistentVolumes en
    GKE](#Laboratorio_probando_PersistentVolumes_en_GKE "Laboratorio: probando PersistentVolumes en GKE"){.ez-toc-link
    .ez-toc-heading-5}
    -   [Conectarse al
        cluster](#Conectarse_al_cluster "Conectarse al cluster"){.ez-toc-link
        .ez-toc-heading-6}
    -   [Crear PVC](#Crear_PVC "Crear PVC"){.ez-toc-link
        .ez-toc-heading-7}
    -   [Crear Pod](#Crear_Pod "Crear Pod"){.ez-toc-link
        .ez-toc-heading-8}
    -   [Prueba de
        Persistencia](#Prueba_de_Persistencia "Prueba de Persistencia"){.ez-toc-link
        .ez-toc-heading-9}
    -   [Crear
        StatefulSet](#Crear_StatefulSet "Crear StatefulSet"){.ez-toc-link
        .ez-toc-heading-10}
:::

# [ ]{#Tipos_de_Volumenes .ez-toc-section} Tipos de Volumenes [ ]{.ez-toc-section-end} {#tipos-de-volumenes .wp-block-heading}

En este caso los vamos a estar clasificando en 2 tipos Efimeros y
Persistentes.

## [ ]{#Volumenes_efimeros .ez-toc-section} Volumenes efímeros: [ ]{.ez-toc-section-end} {#volumenes-efímeros .wp-block-heading}

Este tipo de Volumen se asignan a nivel de pods y dependen del ciclo de
vida de los pods. Se utilizan cuando los datos o la informacion no deben
ser mantenidos a lo largo del tiempo (es decir que no debe ser
presistente).

Con este tipo de volumenes, cuando el ciclo de vida del pod finalice,
tambien finalizará la de los datos. Los volumenes no mantendran una
persistencia de datos.

Algunos ejemplos:

-   emptyDir:
    -   Cuando un pod storage se define este tipo de volume, se crea
        cuando el pod es asignado a un nodo del cluster.
    -   Se asigna (como indica el nombre) un directorio vacío.
    -   Es compartido para todos los Contendores dentro del pod.
    -   Cuando el ciclo de vida del pod finaliza. Tambien finaliza la
        del emptyDir volume y sus datos son eliminados.
    -   Cuando un contenedor Crashea los datos no son eliminados.
    -   Algunos usos posibles:
        -   **Espacio de trabajo temporal** ( **scratch space)** .
        -   **Guardar puntos de control en cálculos largos para
            recuperarse de fallos** .
        -   **Mantener archivos que un contenedor de Content-Manager
            obtiene mientras un contenedor de servidor web proporciona
            los datos** .

Ephemerals con propositos particulares:

-   ConfigMaps:
    -   Es una forma de inyectar datos de configuración en los pods.
    -   Se referencia dentro de las especificaciones del pod.
-   Secrets:
    -   Se utiliza para pasar a los pods información sensible de manear
        segura como passwords.

## [ ]{#Volumenes_Persistentes .ez-toc-section} Volumenes Persistentes: [ ]{.ez-toc-section-end} {#volumenes-persistentes .wp-block-heading}

-   Son independientes.
-   No dependen del ciclo de vida de los Pods.
-   Pueden ser PersistenVolumes o PersistentVolumesClaim.

Los tipos que estaremos viendo hoy:

-   **PersistenVolume (PV):**
    -   Es la declaración del storage persistente presentado en el
        cluster. Se provisiona utilizando Storage Classes. Tienen una
        vida independiente a la de los pods.
    -   El tipo de Storage es definido por las StorageClasses.
-   **PersistentVolumeClaim (PVC):**
    -   Es el solicitante configurado a nivel del pod para consumir el
        PV.
    -   El request puede especificar niveles especificos de recursos,
        size y modelos de acceso.

# [ ]{#%C2%BFQue_es_un_StatefulSet .ez-toc-section} ¿Que es un StatefulSet? [ ]{.ez-toc-section-end} {#que-es-un-statefulset .wp-block-heading}

Es un tipo de objeto declarativo de K8s que se utiliza para gestionar
aplicaciones con estado persistente.

Gestiona la implementación y escalamiento de un set de Pods y provee
garantias sobre el ordeniamiento y uniqueness de cada Pod.

La diferencia con los deployments es que se maneja una identidad para
cada pod. Se crean con las mismas especificaciones pero no son
intercambiables. Se setean identificadores persistentes que se mantienen
durante los reschedules.

Se utilizan para apps que requieran:

-   Identificadores de Red unicos.
-   Storage Persistente y estable.
-   Implementación y escalamiento unico y de manera ordenada.
-   Rolling Updates automaticos.

# [ ]{#Laboratorio_probando_PersistentVolumes_en_GKE .ez-toc-section} Laboratorio: probando PersistentVolumes en GKE [ ]{.ez-toc-section-end} {#laboratorio-probando-persistentvolumes-en-gke .wp-block-heading}

Vamos a arrancar con el lab!

Primero, podemos corroborar que tenemos un GKE Standard Cluster
desplegado en nuestro ambiente de laboratorio de GCP:

<figure class="wp-block-image size-large is-resized">
<img
src="https://madsblog.net/wp-content/uploads/2023/11/image-48-1024x359.png"
class="wp-image-1110" style="width:640px;height:auto" decoding="async"
sizes="(max-width: 1024px) 100vw, 1024px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-48-1024x359.png 1024w, https://madsblog.net/wp-content/uploads/2023/11/image-48-300x105.png 300w, https://madsblog.net/wp-content/uploads/2023/11/image-48-768x269.png 768w, https://madsblog.net/wp-content/uploads/2023/11/image-48.png 1086w"
width="1024" height="359" />
</figure>

## [ ]{#Conectarse_al_cluster .ez-toc-section} Conectarse al cluster [ ]{.ez-toc-section-end} {#conectarse-al-cluster .wp-block-heading}

Como siempre debemos hacer en Cloud Shell o Gcloud, utilizaremos las
Enviroment Variables para guardar la zona y el nombre del Cluster de
GKE:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="export my_zone=us-central1-a
export my_cluster=standard-cluster-1" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
export my_zone=us-central1-a
export my_cluster=standard-cluster-1
```
:::

Luego, vamos a setear el autocompletado de Kubectl en cloud shell:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="source <(kubectl completion bash)" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
source <(kubectl completion bash)
```
:::

Ahora, nos vamos a conectar a nuestro cluster utilizando el siguiente
comando:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="gcloud container clusters get-credentials $my_cluster --zone $my_zone"
role="button" style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
gcloud container clusters get-credentials $my_cluster --zone $my_zone
```
:::

Este es el output que debería generarse:

<figure class="wp-block-image alignwide size-full">
<img src="https://madsblog.net/wp-content/uploads/2023/11/image-49.png"
class="wp-image-1111" decoding="async" loading="lazy"
sizes="(max-width: 1002px) 100vw, 1002px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-49.png 1002w, https://madsblog.net/wp-content/uploads/2023/11/image-49-300x58.png 300w, https://madsblog.net/wp-content/uploads/2023/11/image-49-768x148.png 768w"
width="1002" height="193" />
</figure>

## [ ]{#Crear_PVC .ez-toc-section} Crear PVC [ ]{.ez-toc-section-end} {#crear-pvc .wp-block-heading}

Ahora utilizaremos el siguiente yaml file para declarar nuestro
PersistenVolumeClaim:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: hello-web-disk
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 30Gi" role="button" style="color:#d8dee9ff;display:none"
tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: hello-web-disk
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 30Gi
```
:::

Como veremos en la siguiente imagen el PVC es creado en K8s:

<figure class="wp-block-image alignwide size-full">
<img src="https://madsblog.net/wp-content/uploads/2023/11/image-52.png"
class="wp-image-1114" decoding="async" loading="lazy"
sizes="(max-width: 861px) 100vw, 861px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-52.png 861w, https://madsblog.net/wp-content/uploads/2023/11/image-52-300x20.png 300w, https://madsblog.net/wp-content/uploads/2023/11/image-52-768x52.png 768w"
width="861" height="58" />
</figure>

Podremos verificar el correcto despliegue utilizando el siguiente
comando:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="kubectl get persistentvolumeclaim" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
kubectl get persistentvolumeclaim
```
:::

## [ ]{#Crear_Pod .ez-toc-section} Crear Pod [ ]{.ez-toc-section-end} {#crear-pod .wp-block-heading}

Ahora crearemos un Pod para poder montar el PV utiilzando el PVC.
Declaración del Pod:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy" data-code="kind: Pod
apiVersion: v1
metadata:
  name: pvc-demo-pod
spec:
  containers:
    - name: frontend
      image: nginx
      volumeMounts:
      - mountPath: \"/var/www/html\"
        name: pvc-demo-volume
  volumes:
    - name: pvc-demo-volume
      persistentVolumeClaim:
        claimName: hello-web-disk" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
kind: Pod
apiVersion: v1
metadata:
  name: pvc-demo-pod
spec:
  containers:
    - name: frontend
      image: nginx
      volumeMounts:
      - mountPath: "/var/www/html"
        name: pvc-demo-volume
  volumes:
    - name: pvc-demo-volume
      persistentVolumeClaim:
        claimName: hello-web-disk
```
:::

Como podemos ver se declara el PVC en

-   ***specs.containers.frontend.mountPath*** : donde referenciamos el
    path de mount y el PVC.
-   ***specs.volumes*** : aquí declaramos el volumenb referenciando al
    PVC creado en el paso anterior.

Para desplegarlo utilizaremos el siguiente comando:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="kubectl apply -f nginx-fronted.yaml" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
kubectl apply -f nginx-fronted.yaml
```
:::

<figure class="wp-block-image alignwide size-large">
<img
src="https://madsblog.net/wp-content/uploads/2023/11/image-55-1024x58.png"
class="wp-image-1117" decoding="async" loading="lazy"
sizes="(max-width: 1024px) 100vw, 1024px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-55-1024x58.png 1024w, https://madsblog.net/wp-content/uploads/2023/11/image-55-300x17.png 300w, https://madsblog.net/wp-content/uploads/2023/11/image-55-768x44.png 768w, https://madsblog.net/wp-content/uploads/2023/11/image-55.png 1138w"
width="1024" height="58" />
</figure>

Podemos ver los pods desplegados

<figure class="wp-block-image size-full">
<img src="https://madsblog.net/wp-content/uploads/2023/11/image-60.png"
class="wp-image-1122" decoding="async" loading="lazy"
sizes="(max-width: 624px) 100vw, 624px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-60.png 624w, https://madsblog.net/wp-content/uploads/2023/11/image-60-300x66.png 300w"
width="624" height="138" />
</figure>

## [ ]{#Prueba_de_Persistencia .ez-toc-section} Prueba de Persistencia [ ]{.ez-toc-section-end} {#prueba-de-persistencia .wp-block-heading}

Realizaremos una pequeña prueba de persistencia.

Primero, ingresaremos al bash del pod creado utilizando el siguiente
comando:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="kubectl exec -it pvc-demo-pod -- sh" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
kubectl exec -it pvc-demo-pod -- sh
```
:::

Luego crearemos un archivo html en nuestro mountPath:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="echo Test webpage in a persistent volume!>/var/www/html/index.html
chmod +x /var/www/html/index.html" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
echo Test webpage in a persistent volume!>/var/www/html/index.html
chmod +x /var/www/html/index.html
```
:::

<figure class="wp-block-image alignwide size-full">
<img src="https://madsblog.net/wp-content/uploads/2023/11/image-56.png"
class="wp-image-1118" decoding="async" loading="lazy"
sizes="(max-width: 989px) 100vw, 989px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-56.png 989w, https://madsblog.net/wp-content/uploads/2023/11/image-56-300x28.png 300w, https://madsblog.net/wp-content/uploads/2023/11/image-56-768x72.png 768w"
width="989" height="93" />
</figure>

Ahora eliminaremos el pod:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="kubectl delete pod pvc-demo-pod" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
kubectl delete pod pvc-demo-pod
```
:::

<figure class="wp-block-image alignwide size-full">
<img src="https://madsblog.net/wp-content/uploads/2023/11/image-58.png"
class="wp-image-1120" decoding="async" loading="lazy"
sizes="(max-width: 989px) 100vw, 989px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-58.png 989w, https://madsblog.net/wp-content/uploads/2023/11/image-58-300x29.png 300w, https://madsblog.net/wp-content/uploads/2023/11/image-58-768x75.png 768w"
width="989" height="97" />
</figure>

Verificamos la existencia del PVC:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="kubectl get persistentvolumeclaim" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
kubectl get persistentvolumeclaim
```
:::

<figure class="wp-block-image alignwide size-full">
<img src="https://madsblog.net/wp-content/uploads/2023/11/image-59.png"
class="wp-image-1121" decoding="async" loading="lazy"
sizes="(max-width: 773px) 100vw, 773px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-59.png 773w, https://madsblog.net/wp-content/uploads/2023/11/image-59-300x45.png 300w, https://madsblog.net/wp-content/uploads/2023/11/image-59-768x116.png 768w"
width="773" height="117" />
</figure>

Re-creamos el pod:

Para desplegarlo utilizaremos el siguiente comando:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="kubectl apply -f nginx-fronted.yaml" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
kubectl apply -f nginx-fronted.yaml
```
:::

Y verificamos la persistencia leyendo el archivo creado en el paso
anterior.

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="cat /var/www/html/index.html" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
cat /var/www/html/index.html
```
:::

<figure class="wp-block-image size-full is-resized">
<img src="https://madsblog.net/wp-content/uploads/2023/11/image-61.png"
class="wp-image-1123" style="width:693px;height:auto" decoding="async"
loading="lazy" sizes="(max-width: 613px) 100vw, 613px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-61.png 613w, https://madsblog.net/wp-content/uploads/2023/11/image-61-300x115.png 300w"
width="613" height="235" />
</figure>

## [ ]{#Crear_StatefulSet .ez-toc-section} Crear StatefulSet [ ]{.ez-toc-section-end} {#crear-statefulset .wp-block-heading}

Ahora crearemos un StatefulSet.

Utilizaremos el siguiente yaml:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy" data-code="kind: Service
apiVersion: v1
metadata:
  name: statefulset-demo-service
spec:
  ports:
  - protocol: TCP
    port: 80
    targetPort: 9376
  type: LoadBalancer
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: statefulset-demo
spec:
  selector:
    matchLabels:
      app: MyApp
  serviceName: statefulset-demo-service
  replicas: 3
  updateStrategy:
    type: RollingUpdate
  template:
    metadata:
      labels:
        app: MyApp
    spec:
      containers:
      - name: stateful-set-container
        image: nginx
        ports:
        - containerPort: 80
          name: http
        volumeMounts:
        - name: hello-web-disk
          mountPath: \"/var/www/html\"
  volumeClaimTemplates:
  - metadata:
      name: hello-web-disk
    spec:
      accessModes: [ \"ReadWriteOnce\" ]
      resources:
        requests:
          storage: 30Gi" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
kind: Service
apiVersion: v1
metadata:
  name: statefulset-demo-service
spec:
  ports:
  - protocol: TCP
    port: 80
    targetPort: 9376
  type: LoadBalancer
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: statefulset-demo
spec:
  selector:
    matchLabels:
      app: MyApp
  serviceName: statefulset-demo-service
  replicas: 3
  updateStrategy:
    type: RollingUpdate
  template:
    metadata:
      labels:
        app: MyApp
    spec:
      containers:
      - name: stateful-set-container
        image: nginx
        ports:
        - containerPort: 80
          name: http
        volumeMounts:
        - name: hello-web-disk
          mountPath: "/var/www/html"
  volumeClaimTemplates:
  - metadata:
      name: hello-web-disk
    spec:
      accessModes: [ "ReadWriteOnce" ]
      resources:
        requests:
          storage: 30Gi
```
:::

La caracteristica diferenciada de este yaml es que en lugar de declarar
el volumen a nivel del pod, declaramos el volumeClaimTemplates, donde
especificamos los datos de nuestro PVC directamente dentro de este mismo
yaml.

Esto generará que se creen nuevos PVCs a partir de la aplicación de este
archivo.

Lo desplegamos utilizando el comando "kubectl apply" ejecutado
anteriormente, pero cambiando el archivo:

::: {.wp-block-kevinbatdorf-code-block-pro code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"}
[
![](data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE0IiB2aWV3Ym94PSIwIDAgNTQgMTQiIHdpZHRoPSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIj4KICAgICAgICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiBmaWxsPSIjRkY1RjU2IiByPSI2IiBzdHJva2U9IiNFMDQ0M0UiIHN0cm9rZS13aWR0aD0iLjUiPgogICAgICAgICAgPC9jaXJjbGU+CiAgICAgICAgICA8Y2lyY2xlIGN4PSIyNiIgY3k9IjYiIGZpbGw9IiNGRkJEMkUiIHI9IjYiIHN0cm9rZT0iI0RFQTEyMyIgc3Ryb2tlLXdpZHRoPSIuNSI+CiAgICAgICAgICA8L2NpcmNsZT4KICAgICAgICAgIDxjaXJjbGUgY3g9IjQ2IiBjeT0iNiIgZmlsbD0iIzI3QzkzRiIgcj0iNiIgc3Ryb2tlPSIjMUFBQjI5IiBzdHJva2Utd2lkdGg9Ii41Ij4KICAgICAgICAgIDwvY2lyY2xlPgogICAgICAgICA8L2c+CiAgICAgICAgPC9zdmc+)
]{style="display:block;padding:16px 0 0 16px;margin-bottom:-1px;width:100%;text-align:left;background-color:#2e3440ff"}
[
![](data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHlsZT0id2lkdGg6MjRweDtoZWlnaHQ6MjRweCIgdmlld2JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogICAgICAgICA8cGF0aCBjbGFzcz0id2l0aC1jaGVjayIgZD0iTTkgNUg3YTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMGEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMk05IDVhMiAyIDAgMDAyIDJoMmEyIDIgMCAwMDItMk05IDVhMiAyIDAgMDEyLTJoMmEyIDIgMCAwMTIgMm0tNiA5bDIgMiA0LTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICAgPHBhdGggY2xhc3M9IndpdGhvdXQtY2hlY2siIGQ9Ik05IDVIN2EyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJoMTBhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTJNOSA1YTIgMiAwIDAwMiAyaDJhMiAyIDAgMDAyLTJNOSA1YTIgMiAwIDAxMi0yaDJhMiAyIDAgMDEyIDIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+CiAgICAgICAgIDwvcGF0aD4KICAgICAgICA8L3N2Zz4=)
]{.code-block-pro-copy-button aria-label="Copy"
data-code="kubectl apply -f statefulset-demo.yaml" role="button"
style="color:#d8dee9ff;display:none" tabindex="0"}

``` {.shiki .nord style="background-color: #2e3440ff" tabindex="0"}
kubectl apply -f statefulset-demo.yaml
```
:::

<figure class="wp-block-image size-full">
<img src="https://madsblog.net/wp-content/uploads/2023/11/image-62.png"
class="wp-image-1124" decoding="async" loading="lazy"
sizes="(max-width: 775px) 100vw, 775px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-62.png 775w, https://madsblog.net/wp-content/uploads/2023/11/image-62-298x300.png 298w, https://madsblog.net/wp-content/uploads/2023/11/image-62-150x150.png 150w, https://madsblog.net/wp-content/uploads/2023/11/image-62-768x773.png 768w"
width="775" height="780" />
</figure>

Podemos observar los pods creados:

<figure class="wp-block-image alignwide size-full">
<img src="https://madsblog.net/wp-content/uploads/2023/11/image-63.png"
class="wp-image-1125" decoding="async" loading="lazy"
sizes="(max-width: 763px) 100vw, 763px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-63.png 763w, https://madsblog.net/wp-content/uploads/2023/11/image-63-300x45.png 300w"
width="763" height="114" />
</figure>

Y como comentamos anteriormente los PVC creados.

<figure class="wp-block-image alignwide size-full">
<img src="https://madsblog.net/wp-content/uploads/2023/11/image-64.png"
class="wp-image-1126" decoding="async" loading="lazy"
sizes="(max-width: 900px) 100vw, 900px"
srcset="https://madsblog.net/wp-content/uploads/2023/11/image-64.png 900w, https://madsblog.net/wp-content/uploads/2023/11/image-64-300x64.png 300w, https://madsblog.net/wp-content/uploads/2023/11/image-64-768x165.png 768w"
width="900" height="193" />
</figure>

Esto, al igual que en punto anterior nos dará persistencia de discos,
pero un StatefulSet nos da otros features de una capa de abstracción
mayor.

::: {.addtoany_share_save_container .addtoany_content .addtoany_content_bottom}
::: {.a2a_kit .a2a_kit_size_32 .addtoany_list a2a-title="Storage Persistente en GKE" a2a-url="https://madsblog.net/2023/11/24/storage-persistente-en-gke/"}
[](https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fmadsblog.net%2F2023%2F11%2F24%2Fstorage-persistente-en-gke%2F&linkname=Storage%20Persistente%20en%20GKE "Twitter"){.a2a_button_twitter
rel="nofollow noopener" target="_blank"}
[](https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fmadsblog.net%2F2023%2F11%2F24%2Fstorage-persistente-en-gke%2F&linkname=Storage%20Persistente%20en%20GKE "Email"){.a2a_button_email
rel="nofollow noopener" target="_blank"}
[](https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fmadsblog.net%2F2023%2F11%2F24%2Fstorage-persistente-en-gke%2F&linkname=Storage%20Persistente%20en%20GKE "LinkedIn"){.a2a_button_linkedin
rel="nofollow noopener" target="_blank"}
[](https://www.addtoany.com/add_to/whatsapp?linkurl=https%3A%2F%2Fmadsblog.net%2F2023%2F11%2F24%2Fstorage-persistente-en-gke%2F&linkname=Storage%20Persistente%20en%20GKE "WhatsApp"){.a2a_button_whatsapp
rel="nofollow noopener" target="_blank"}
[](https://www.addtoany.com/share){.a2a_dd .addtoany_share_save
.addtoany_share}
:::
:::
:::
:::

::: wp-block-template-part
::: {.wp-block-spacer aria-hidden="true" style="height:0"}
:::

::: {.wp-block-group .has-global-padding .is-layout-constrained .wp-block-group-is-layout-constrained style="margin-top:var(--wp--preset--spacing--70)"}

------------------------------------------------------------------------

::: {.wp-block-columns .alignwide .has-small-font-size .is-layout-flex .wp-container-core-columns-layout-1 .wp-block-columns-is-layout-flex style="margin-top:var(--wp--preset--spacing--30)"}
::: {.wp-block-column .is-layout-flow .wp-container-core-column-layout-1 .wp-block-column-is-layout-flow}
::: {.wp-block-group .is-layout-flex .wp-container-core-group-layout-5 .wp-block-group-is-layout-flex}
Posted

::: wp-block-post-date
November 24, 2023
:::

in

::: {.taxonomy-category .wp-block-post-terms}
[GCP](https://madsblog.net/category/google-cloud-platform/){rel="tag"} [
, ]{.wp-block-post-terms__separator}
[GKE](https://madsblog.net/category/google-cloud-platform/gke/){rel="tag"}
[ , ]{.wp-block-post-terms__separator}
[Kubernetes](https://madsblog.net/category/devops-tools/kubernetes/){rel="tag"}
:::
:::

::: {.wp-block-group .is-layout-flex .wp-container-core-group-layout-6 .wp-block-group-is-layout-flex}
by

::: wp-block-post-author
::: wp-block-post-author__content
siteadmin
:::
:::
:::
:::

::: {.wp-block-column .is-layout-flow .wp-container-core-column-layout-2 .wp-block-column-is-layout-flow}
::: {.wp-block-group .is-vertical .is-layout-flex .wp-container-core-group-layout-7 .wp-block-group-is-layout-flex}
Tags:
:::
:::
:::
:::
:::

::: {.section .wp-block-template-part}
::: {.wp-block-group .has-global-padding .is-layout-constrained .wp-block-group-is-layout-constrained style="padding-top:var(--wp--preset--spacing--40);padding-right:var(--wp--preset--spacing--40);padding-bottom:var(--wp--preset--spacing--40);padding-left:var(--wp--preset--spacing--40)"}
::: wp-block-comments
## Comments {#comments .wp-block-heading}

::: {#respond .comment-respond .wp-block-post-comments-form}
### Leave a Reply [[Cancel reply](/2023/11/24/storage-persistente-en-gke/#respond){#cancel-comment-reply-link rel="nofollow" style="display:none;"}]{.small} {#reply-title .comment-reply-title}

[ Your email address will not be published. ]{#email-notes} [ Required
fields are marked [ \* ]{.required} ]{.required-field-message}

Comment [ \* ]{.required}

Name [ \* ]{.required}

Email [ \* ]{.required}

Website

Save my name, email, and website in this browser for the next time I
comment.

Δ
:::

This site uses Akismet to reduce spam. [Learn how your comment data is
processed](https://akismet.com/privacy/){rel="nofollow noopener"
target="_blank"} .
:::
:::
:::
:::

::: {.wp-block-group .has-global-padding .is-layout-constrained .wp-block-group-is-layout-constrained}
::: {.wp-block-group .alignwide .is-content-justification-space-between .is-layout-flex .wp-container-core-group-layout-11 .wp-block-group-is-layout-flex style="padding-top:var(--wp--preset--spacing--40)"}
[Aprende Multi Cloud(s)](https://madsblog.net){rel="home"
target="_self"}

Proudly powered by [WordPress](https://wordpress.org){rel="nofollow"}
:::
:::
:::
